

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>API &mdash; TransitFit 2.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="FAQs" href="faqs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TransitFit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="configfiles.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="limb_darkening.html">Limb-darkening</a></li>
<li class="toctree-l1"><a class="reference internal" href="detrending.html">Detrending</a></li>
<li class="toctree-l1"><a class="reference internal" href="manyparams.html">Fitting large number of parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="ttvs.html">Allowing for TTVs</a></li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">FAQs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit._pipeline">Top-Level Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit.retriever">Retriever</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit.priorinfo">Prior handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit._limb_darkening_handler">Limb darkening handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit._ldtk_handler">LDTK interfacing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit._likelihood">Likelihood calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit.detrender">Detrending</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit.output_handler">Input and output</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit.lightcurve">Parameter handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-transitfit._utils">General utility functions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TransitFit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p>This page details the methods and classes provided by the <code class="docutils literal notranslate"><span class="pre">TransitFit</span></code> module.</p>
<div class="section" id="module-transitfit._pipeline">
<span id="top-level-interface"></span><h2>Top-Level Interface<a class="headerlink" href="#module-transitfit._pipeline" title="Permalink to this headline">¶</a></h2>
<p>A function which will run everything when given a path to light curve and
priors!</p>
<dl class="py function">
<dt id="transitfit._pipeline.run_retrieval">
<code class="sig-prename descclassname"><span class="pre">transitfit._pipeline.</span></code><code class="sig-name descname"><span class="pre">run_retrieval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrending_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[['nth</span> <span class="pre">order',</span> <span class="pre">1]]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limb_darkening_model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'quadratic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'independent'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitting_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_batch_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_logg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlogz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynesty_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rslice'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynesty_bounding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'multi'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results_output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./output_parameters'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_lightcurve_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./fitted_lightcurves'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summary_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dimgrey'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ldtk_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_ld_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_ld_mc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_skiprows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_ttv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrending_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cadence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._pipeline.run_retrieval" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a full retrieval of posteriors using nested sampling on a transit
light curve or a set of transit light curves. For more guidance on the use
of input files and structuring, see the TransitFit documentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_files</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The path to the data input .csv file, which contains the paths to the
light curve data.</p></li>
<li><p><strong>priors</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path to a .csv file containing prior information on each variable to be
fitted.</p></li>
<li><p><strong>filter_info</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Path to a .csv file containing information on the wavelengths of the
filters that observations were made at.</p>
<p>This is required if ld_fit_method is <cite>‘single’</cite> or <cite>‘coupled’</cite>. If not
None and host_T, host_logg and host_z are not None, retrieval will
include fitting realistic limb darkening parameters for the filters.
Default is None.</p>
</p></li>
<li><p><strong>detrending_list</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_detrending_models</em><em>, </em><em>2</em><em>)</em>) – <p>A list of different detrending models. Each entry should consist
of a method and a second parameter dependent on the method.
Accepted methods are</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">['nth</span> <span class="pre">order',</span> <span class="pre">order]</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">['custom',</span> <span class="pre">function,</span> <span class="pre">[global</span> <span class="pre">fit</span> <span class="pre">indices,</span> <span class="pre">filter</span> <span class="pre">fit</span> <span class="pre">indices,</span> <span class="pre">epoch</span> <span class="pre">fit</span> <span class="pre">indices]]</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">['off',</span> <span class="pre">]</span></code></p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">function</span></code> here is a custom detrending function. TransitFit assumes
that the first argument to this function is times and that all
other arguments are single-valued - TransitFit cannot fit
list/array variables. If ‘off’ is used, no detrending will be
applied to the <a href="#id1"><span class="problematic" id="id2">``</span></a>LightCurve``s using this model.</p>
<p>If a custom function is used, and some inputs to the function
should not be fitted individually for each light curve, but should
instead be shared either globally, within a given filter, or within
a given epoch, the indices of where these fall within the arguments
of the detrending function should be given as a list. If there are
no indices to be given, then use an empty list: []
e.g. if the detrending function is given by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="c1"># do something</span>
</pre></div>
</div>
<p>and a should be fitted globally, then the entry in the method_list
would be <code class="docutils literal notranslate"><span class="pre">['custom',</span> <span class="pre">foo,</span> <span class="pre">[1],</span> <span class="pre">[],</span> <span class="pre">[]]</span></code>.</p>
</p></li>
<li><p><strong>ld_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>The limb darkening model to use. Allowed models are</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'linear'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'quadratic'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'squareroot'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'power2'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'nonlinear'</span></code></p></li>
</ul>
</div></blockquote>
<p>With the exception of the non-linear model, all models are constrained
by the method in Kipping (2013), which can be found at
<a class="reference external" href="https://arxiv.org/abs/1308.0009">https://arxiv.org/abs/1308.0009</a>.
Default is ‘quadratic’.</p>
</p></li>
<li><p><strong>ld_fit_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Determines the mode of fitting of limb darkening parameters. The
available modes are:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'coupled'</span></code> : all limb darkening parameters are fitted
independently, but are coupled to a wavelength dependent
model based on the host parameters through <cite>ldkt</cite></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'single'</span></code> : LD parameters are still tied to a model, but only
the first filter is actively fitted. The remaining filters
are estimated based off the ratios given by ldtk for a host
with the given parameters. This mode is useful for a large
number of filters, as ‘coupled’ or ‘independent’ fitting will
lead to much higher computation times.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'independent'</span></code> : Each LD coefficient is fitted separately for
each filter, with no coupling to the ldtk models.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'off'</span></code> : no limb darkening fitting will occurr. If using this
mode, it it strongly recommended to set values for the
Kipping q parameters using the priors file.</p></li>
</ul>
</div></blockquote>
<p>Default is <cite>‘independent’</cite></p>
</p></li>
<li><p><strong>fitting_mode</strong> ({<code class="docutils literal notranslate"><span class="pre">'auto'</span></code>, <code class="docutils literal notranslate"><span class="pre">'all'</span></code>, <code class="docutils literal notranslate"><span class="pre">'2_stage'</span></code>, <code class="docutils literal notranslate"><span class="pre">'folded'</span></code>, <code class="docutils literal notranslate"><span class="pre">'batched'</span></code>}, optional) – <p>The approach TransitFit takes towards limiting the number of parameters
being simultaneously fitted. The available modes are:
- <code class="docutils literal notranslate"><span class="pre">'auto'</span></code> : Will calculate the number of parameters required to fit</p>
<blockquote>
<div><p>all the data simulataneously. If this is less than max_parameters,
will set to <code class="docutils literal notranslate"><span class="pre">'all'</span></code> mode, else will set to <code class="docutils literal notranslate"><span class="pre">'folded'</span></code> if at least
one filter has at least 3 epochs in it. Otherwise will set to
<code class="docutils literal notranslate"><span class="pre">'batched'</span></code></p>
</div></blockquote>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'all'</span></code> : Fits all parameters simultaneously, with no folding or
batching of curves. Should be used with caution when fitting very
large (~&lt; 30) numbers of parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'2_stage'</span></code> : Fits in 2 stages, first detrending the light curves
and then fitting the detrended curves simultaneously, using the
<code class="docutils literal notranslate"><span class="pre">'batched'</span></code> approach if required.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'folded'</span></code> : Useful for fitting curves with multiple epochs for each
filter. TransitFit will fit each filter separately and produce a
period-folded light curve for each filter, before fitting these
simultaneously, using the <code class="docutils literal notranslate"><span class="pre">'batched'</span></code> approach if required.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'batched'</span></code> : Useful for large numbers of light curves with
relatively few shared filters, so <code class="docutils literal notranslate"><span class="pre">'folded'</span></code> loses large amounts of
multi-epoch information. This mode splits the filters into sets of
overlapping batches, runs each batch and uses the weighted means of
each batch to produce a final result.</p></li>
</ul>
<p>Default is <code class="docutils literal notranslate"><span class="pre">'auto'</span></code>.</p>
</p></li>
<li><p><strong>max_batch_parameters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The maximum number of parameters to use in a single retrieval when
using <code class="docutils literal notranslate"><span class="pre">'folded'</span></code> or <code class="docutils literal notranslate"><span class="pre">'batched'</span></code> fitting modes. Default is 25.</p></li>
<li><p><strong>batch_overlap</strong> (<em>in</em><em>, </em><em>optional</em>) – The number of filters or epochs to overlap adjacent batches by where
possible. This ensures that adjacent batches share information. Default
is 2.</p></li>
<li><p><strong>host_T</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The effective temperature of the host star, in Kelvin. Should be given
as a (value, uncertainty) pair. Required if ld_fit_method is
<code class="docutils literal notranslate"><span class="pre">'single'</span></code> or <code class="docutils literal notranslate"><span class="pre">'coupled'</span></code>. Default is None.</p></li>
<li><p><strong>host_logg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The log_10 of the surface gravity of the host star, with gravity
measured in cm/s2. Should be given as a (value, uncertainty) pair.
Required if ld_fit_method is <code class="docutils literal notranslate"><span class="pre">'single'</span></code> or <code class="docutils literal notranslate"><span class="pre">'coupled'</span></code>. Default is
None</p></li>
<li><p><strong>host_z</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The metalicity of the host, given as a (value, uncertainty) pair.
Required if ld_fit_method is <code class="docutils literal notranslate"><span class="pre">'single'</span></code> or <code class="docutils literal notranslate"><span class="pre">'coupled'</span></code>. Default is
None</p></li>
<li><p><strong>host_r</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The host radius in Solar radii, given as a (value, uncertainty) pair.
Required for conversion of host-planet separation from AU to host radii</p></li>
<li><p><strong>nlive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of live points to use in the nested sampling retrieval.</p></li>
<li><p><strong>normalise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>If True, will assume that the light curves have not been normalised and
will fit normalisation constants within the retrieval. The range to
fit normalisation constants c_n are automatically detected using</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">1/f_max</span> <span class="pre">&lt;=</span> <span class="pre">c_n</span> <span class="pre">&lt;=</span> <span class="pre">1/f_min</span></code></p>
</div></blockquote>
<p>as the default range, where <code class="docutils literal notranslate"><span class="pre">f_min</span></code> and <code class="docutils literal notranslate"><span class="pre">f_max</span></code> are the minimum and
maximum flux values for a given light curve. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</p></li>
<li><p><strong>detrend</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If False, no detrending will be attempted, even if specified by
detrending list. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
<li><p><strong>dlogz</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Retrieval iteration will stop when the estimated contribution of the
remaining prior volume to the total evidence falls below this
threshold. Explicitly, the stopping criterion is
<code class="docutils literal notranslate"><span class="pre">ln(z</span> <span class="pre">+</span> <span class="pre">z_est)</span> <span class="pre">-</span> <span class="pre">ln(z)</span> <span class="pre">&lt;</span> <span class="pre">dlogz</span></code>, where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the current evidence
from all saved samples and z_est is the estimated contribution from
the remaining volume. The default is <code class="docutils literal notranslate"><span class="pre">1e-3</span> <span class="pre">*</span> <span class="pre">(nlive</span> <span class="pre">-</span> <span class="pre">1)</span> <span class="pre">+</span> <span class="pre">0.01</span></code>.</p></li>
<li><p><strong>maxiter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The maximum number of iterations to run. If None, will
continue until stopping criterion is reached. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>maxcall</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The maximum number of likelihood calls in retrieval. If None, will
continue until stopping criterion is reached. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>dynesty_sample</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Method used to sample uniformly within the likelihood constraint,
conditioned on the provided bounds. Unique methods available are:
uniform sampling within the bounds(<code class="docutils literal notranslate"><span class="pre">'unif'</span></code>), random walks with fixed
proposals (<code class="docutils literal notranslate"><span class="pre">'rwalk'</span></code>), random walks with variable (“staggering”)
proposals (<code class="docutils literal notranslate"><span class="pre">'rstagger'</span></code>), multivariate slice sampling along preferred
orientations (<code class="docutils literal notranslate"><span class="pre">'slice'</span></code>), “random” slice sampling along all
orientations (<code class="docutils literal notranslate"><span class="pre">'rslice'</span></code>), “Hamiltonian” slices along random
trajectories (<code class="docutils literal notranslate"><span class="pre">'hslice'</span></code>), and any callable function which follows
the pattern of the sample methods defined in dynesty.sampling.
‘auto’ selects the sampling method based on the dimensionality of
the problem (from <code class="docutils literal notranslate"><span class="pre">ndim</span></code>). When ndim &lt; 10, this defaults to <code class="docutils literal notranslate"><span class="pre">'unif'</span></code>.
When 10 &lt;= <code class="docutils literal notranslate"><span class="pre">ndim</span></code> &lt;= 20, this defaults to <code class="docutils literal notranslate"><span class="pre">'rwalk'</span></code>. When ndim &gt; 20,
this defaults to <code class="docutils literal notranslate"><span class="pre">'hslice'</span></code> if a gradient is provided and <code class="docutils literal notranslate"><span class="pre">'slice'</span></code>
otherwise. <code class="docutils literal notranslate"><span class="pre">'rstagger'</span></code> and <code class="docutils literal notranslate"><span class="pre">'rslice'</span></code> are provided as alternatives for
<code class="docutils literal notranslate"><span class="pre">'rwalk'</span></code> and <code class="docutils literal notranslate"><span class="pre">'slice'</span></code>, respectively. Default is <code class="docutils literal notranslate"><span class="pre">'rslice'</span></code>.</p></li>
<li><p><strong>dynesty_bounding</strong> ({<code class="docutils literal notranslate"><span class="pre">'none'</span></code>, <code class="docutils literal notranslate"><span class="pre">'single'</span></code>, <code class="docutils literal notranslate"><span class="pre">'multi'</span></code>, <code class="docutils literal notranslate"><span class="pre">'balls'</span></code>, <code class="docutils literal notranslate"><span class="pre">'cubes'</span></code>}, optional) – The decomposition to use in sampling. Default is ‘multi’</p></li>
<li><p><strong>results_output_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Folder to save results to. TransitFit will create subfolders within
this if folded or batched runs are being used. Default is
<code class="docutils literal notranslate"><span class="pre">'./output_parameters'</span></code></p></li>
<li><p><strong>fitted_lightcurve_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The folder to save fitted light curves to. These files contain the
normalised and detrended light curves, as well as the best fit curve.
Default is <code class="docutils literal notranslate"><span class="pre">'./fitted_lightcurves'</span></code></p></li>
<li><p><strong>summary_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The file to save the summarised final parameter results to. These are
calculated by taking weighted averages over any batched fitting.
Default is <code class="docutils literal notranslate"><span class="pre">'summary_output.csv'</span></code></p></li>
<li><p><strong>full_output_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The file to save the full, non-summarised results to. This file gives
the results for each batch, without averaging over batches to get
summaried results. Default is <code class="docutils literal notranslate"><span class="pre">'full_output.csv'</span></code></p></li>
<li><p><strong>plot_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Path to folder to save plots to. Default is <code class="docutils literal notranslate"><span class="pre">'./plots'</span></code></p></li>
<li><p><strong>plot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, will plot all fitted light curves within the fitting routine,
including any from partial fitting (eg, single filter modes). Default
is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>marker_color</strong> (<em>matplotlib color</em><em>, </em><em>optional</em>) – The colour to plot data points on plots. Default is <code class="docutils literal notranslate"><span class="pre">'dimgray'</span></code>.</p></li>
<li><p><strong>line_colour</strong> (<em>matplotlib color</em><em>, </em><em>optional</em>) – The colour to plot best fit light curves on plots. Default is <code class="docutils literal notranslate"><span class="pre">'black'</span></code>.</p></li>
<li><p><strong>ldtk_cache</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – This is the path to cache LDTK files to. If not specified, will
default to the LDTK default.</p></li>
<li><p><strong>n_ld_samples</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Controls the number of samples taken by PyLDTk when calculating LDCs
when using <code class="docutils literal notranslate"><span class="pre">'coupled'</span></code> or <code class="docutils literal notranslate"><span class="pre">'single'</span></code> modes for limb darkening
fitting. Default is <code class="docutils literal notranslate"><span class="pre">20000</span></code></p></li>
<li><p><strong>do_ld_mc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, will use MCMC sampling to more accurately estimate the
uncertainty on intial limb darkening parameters provided by PyLDTk.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>data_skiprows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of rows to skip when reading in light curve data from a .txt
file. Default is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><strong>allow_ttv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, will fit t0 for each epoch individually. Default is
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>filter_delimiter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The delimiter in filter profile files. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>, which will
lead to <code class="docutils literal notranslate"><span class="pre">pandas</span></code> trying to auto detect the delimiter.</p></li>
<li><p><strong>detrending_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>, </em><em>optional</em>) – The bounds on detrending coefficients, given as (lower, upper) pair for
each detrending method. IF not provided, will default to ±10</p></li>
<li><p><strong>bin_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, any folded light curves will be plotted with data binned to an
observing cadence given by <cite>cadence</cite>. Default is False.</p></li>
<li><p><strong>cadence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The observing cadence, in minutes, to bin data to if <cite>bin_data</cite> is
True. Default is 2 (mirroring TESS observations)</p></li>
<li><p><strong>binned_color</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The color to use for binned data. Default is <cite>‘red’</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>results</strong> – The results returned by <code class="docutils literal notranslate"><span class="pre">Retriever.run_dynesty()</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-transitfit.retriever">
<span id="retriever"></span><h2>Retriever<a class="headerlink" href="#module-transitfit.retriever" title="Permalink to this headline">¶</a></h2>
<p>Object which actually handles the retrieval process</p>
<dl class="py class">
<dt id="transitfit.retriever.Retriever">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit.retriever.</span></code><code class="sig-name descname"><span class="pre">Retriever</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_telescopes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_filters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_epochs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrending_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[['nth</span> <span class="pre">order',</span> <span class="pre">1]]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limb_darkening_model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'quadratic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_logg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ldtk_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_ld_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_ld_mc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_skiprows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_ttv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrending_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Handles the nested sampling retrieval and acts as a high-level interface</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_files</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path to the data input config file</p></li>
<li><p><strong>priors</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Path to the priors config file</p></li>
<li><p><strong>n_telescopes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different telescopes used in the data set</p></li>
<li><p><strong>n_filters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different filters used in the data set</p></li>
<li><p><strong>n_epochs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different epochs used in the data set</p></li>
<li><p><strong>filter_info</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The path to the filter profiles config file</p></li>
<li><p><strong>detrending_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>, </em><em>optional</em>) – The different detrending models to use</p></li>
<li><p><strong>limb_darkening_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The limb darkening model to use</p></li>
<li><p><strong>host_T</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The effective temperature of the host star, in Kelvin. Should be given
as a (value, uncertainty) pair. Required if ld_fit_method is
<code class="docutils literal notranslate"><span class="pre">'single'</span></code> or <code class="docutils literal notranslate"><span class="pre">'coupled'</span></code>. Default is None.</p></li>
<li><p><strong>host_logg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The log_10 of the surface gravity of the host star, with gravity
measured in cm/s2. Should be given as a (value, uncertainty) pair.
Required if ld_fit_method is <code class="docutils literal notranslate"><span class="pre">'single'</span></code> or <code class="docutils literal notranslate"><span class="pre">'coupled'</span></code>. Default is
None</p></li>
<li><p><strong>host_z</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The metalicity of the host, given as a (value, uncertainty) pair.
Required if ld_fit_method is <code class="docutils literal notranslate"><span class="pre">'single'</span></code> or <code class="docutils literal notranslate"><span class="pre">'coupled'</span></code>. Default is
None</p></li>
<li><p><strong>host_r</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The host radius in Solar radii, given as a (value, uncertainty) pair.
Required for conversion of host-planet separation from AU to host radii</p></li>
<li><p><strong>ldtk_cache</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – This is the path to cache LDTK files to. If not specified, will
default to the LDTK default.</p></li>
<li><p><strong>n_ld_samples</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Controls the number of samples taken by PyLDTk when calculating LDCs
when using <code class="docutils literal notranslate"><span class="pre">'coupled'</span></code> or <code class="docutils literal notranslate"><span class="pre">'single'</span></code> modes for limb darkening
fitting. Default is <code class="docutils literal notranslate"><span class="pre">20000</span></code></p></li>
<li><p><strong>do_ld_mc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, will use MCMC sampling to more accurately estimate the
uncertainty on intial limb darkening parameters provided by PyLDTk.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>data_skiprows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of rows to skip when reading in light curve data from a .txt
file. Default is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><strong>allow_ttv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, will fit t0 for each epoch individually. Default is
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>filter_delimiter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The delimiter in filter profile files. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>, which will
lead to <code class="docutils literal notranslate"><span class="pre">pandas</span></code> trying to auto detect the delimiter.</p></li>
<li><p><strong>detrending_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>, </em><em>optional</em>) – The bounds on detrending coefficients, given as (lower, upper) pair for
each detrending method. IF not provided, will default to ±10</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="transitfit.retriever.Retriever._calculate_n_params">
<code class="sig-name descname"><span class="pre">_calculate_n_params</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._calculate_n_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the number of parameters which would be fitted for a
given set of filter and epoch indices</p>
<p>This function exists because it’s much faster than repeatedly making
PriorInfos for different combos.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indices</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The tuple of indices to consider. Must be given as
(telescope_indices, filter_indices, epoch_indices)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._fold_lightcurves">
<code class="sig-name descname"><span class="pre">_fold_lightcurves</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._fold_lightcurves" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces a set of folded lightcurves which can then be fitted across
filters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>results</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_filters</em><em>, </em><em>)</em>) – Each entry should be a list of results objects for each batch</p></li>
<li><p><strong>priors</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_filters</em><em>, </em><em>)</em>) – Each entry should be a list of PriorInfo objects for each batch</p></li>
<li><p><strong>lightcurves</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_filters</em><em>, </em><em>)</em>) – The lightcurves. Each entry should be a list of LightCurve arrays
used for the batches within each filter</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>folded_lightcurves</strong> (<em>np.array, shape (1, n_filters, 1)</em>) – All the lightcurves, with each filter folded onto one epoch.</p></li>
<li><p><strong>folded_P</strong> (<em>float</em>) – The period that the lightcurves are folded with</p></li>
<li><p><strong>folded_t0</strong> (<em>float</em>) – The t0 that all lightcurves are centred on.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._format_indices">
<code class="sig-name descname"><span class="pre">_format_indices</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._format_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>If passed a set of indices, checks they are usable.
If indices is None, sets them to cover all of the possible values</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._full_to_subset_index">
<code class="sig-name descname"><span class="pre">_full_to_subset_index</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subset_indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._full_to_subset_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an index which uses the notation of full parameter space to
a subset. USeful for converting between overall indexing and indexing
within a batch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subset_indices</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The indices which define the full subset of light curves</p></li>
<li><p><strong>full_index</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>3</em><em>, </em><em>)</em>) – The full-notation index to be converted</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._get_detrending_subset">
<code class="sig-name descname"><span class="pre">_get_detrending_subset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._get_detrending_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Pulls out the detrending indices for the given
telescope, filter and epoch indices (given as tuple), assuming that we
are working on all input lightcurves, not a folded version (though that
shouldn’t be using this function)</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._get_folding_batches">
<code class="sig-name descname"><span class="pre">_get_folding_batches</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._get_folding_batches" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits all_lightcurves into single-filter, multi-epoch batches
to be fitted, which will allow us to produce folded lightcurves. This
includes the option to have batches overlapping so that they share some
info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_parameters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The maximum number of parameters to have in a single batch</p></li>
<li><p><strong>ld_fit_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The limb darkening fit method</p></li>
<li><p><strong>detrend</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – If True, detrending will be used</p></li>
<li><p><strong>normalise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – If true, normalisation will be used</p></li>
<li><p><strong>overlap</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of epochs to overlap in each batch. This will be adhered
to where possible. Default is 2.</p></li>
<li><p><strong>random_order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will shuffle the epochs before batching to reduce
correlations from grouping them. Default is True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>batches</strong> – Each entry in the array is a list of batches for the given filter.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array_like, shape (n_filters,)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._get_lightcurve_subset">
<code class="sig-name descname"><span class="pre">_get_lightcurve_subset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._get_lightcurve_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Pulls out the subset of lightcurves given by the indices.</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._get_non_folding_batches">
<code class="sig-name descname"><span class="pre">_get_non_folding_batches</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._get_non_folding_batches" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits lightcurves into batches by filter, attempting to ensure that
batches do not require more than max_parameters to fit. Each batch will
contain every light curve in the filter, which trumps max_parameters.
Where possible, the filter batches will overlap, allowing each batch
to share information on some level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lightcurves</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_telescopes</em><em>, </em><em>n_filters</em><em>, </em><em>n_epochs</em><em>)</em>) – The LightCurves</p></li>
<li><p><strong>max_parameters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The maximum number of parameters to have in a single batch</p></li>
<li><p><strong>ld_fit_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The limb darkening fit method</p></li>
<li><p><strong>detrend</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – If True, detrending will be used</p></li>
<li><p><strong>normalise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – If true, normalisation will be used</p></li>
<li><p><strong>overlap</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of epochs to overlap in each batch. This will be adhered
to where possible. Default is 2.</p></li>
<li><p><strong>lightcurves</strong> – The lightcurves to be batched.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>batches</strong> – The final batches. Each entry is a tuple of
(telescope indices, filter indices, epoch indices) using the
indices of lightcurves. Each of these batches can then be passed to
_get_priors_and_curves.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array_like, shape (n_batches)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._get_priors_and_curves">
<code class="sig-name descname"><span class="pre">_get_priors_and_curves</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded_P</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded_t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suppress_warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._get_priors_and_curves" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a prior info for a particular run:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lightcurves</strong> (<em>array_like</em>) – An array of the light curves which will be golbally considered for
fitting.</p></li>
<li><p><strong>ld_fit_method</strong> (<em>{'independent'</em><em>, </em><em>'single'</em><em>, </em><em>'coupled'</em><em>, </em><em>'off'}</em>) – The mode to fit limb darkening coefficients with.</p></li>
<li><p><strong>indices</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a>) – If None, will fit all light curves. Otherwise, supply relevant
indices of lightcurves to fit as a tuple:
(telescope_indices, filter_indices, epoch_indices)</p></li>
<li><p><strong>detrend</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will initialise detrending fitting. Default is True.</p></li>
<li><p><strong>normalise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will initialise normalisation fitting. Default is True.</p></li>
<li><p><strong>folded</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Set to True if using folded light curves (functionally only one
epoch). Also turns off detrending and normalisation fitting.
Default is False.</p></li>
<li><p><strong>folded_P</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Required if folded is True. This is the period that the light
curves are folded to</p></li>
<li><p><strong>folded_t0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Required if folded is True. This is the t0 that the light curves
are folded to. In the case where ttv mode is used (each epoch
has been fitted to a different t0), then this should be the t0 of
the first epoch (the one which everything else is folded back to)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>priors</strong> (<em>PriorInfo</em>) – The fully initialised PriorInfo object</p></li>
<li><p><em>lightcurves</em> – The LightCurves in the correct format, with detrending and
normalisation initialised</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._get_unique_indices">
<code class="sig-name descname"><span class="pre">_get_unique_indices</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._get_unique_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>When given a tuple of indices of all light curves to consider,
gets all the unique values</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._run_batched_retrieval">
<code class="sig-name descname"><span class="pre">_run_batched_retrieval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batches</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcall</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlive</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlogz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_return</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded_P</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded_t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./output_parameters'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summary_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurve_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./fitted_lightcurves'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dimgrey'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'multi'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._run_batched_retrieval" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a retrieval using the given batches</p>
<dl class="simple">
<dt>lightcurves<span class="classifier">array_like, shape (n_telescopes, n_filters, n_epochs)</span></dt><dd><p>The full lightcurves array to be retrieved.</p>
</dd>
<dt>full_return<span class="classifier">bool, optional</span></dt><dd><p>If True will return all_results, all_priors, all_lightcurves.
If False, will just return all_results. Default is False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._run_dynesty">
<code class="sig-name descname"><span class="pre">_run_dynesty</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlogz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'multi'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._run_dynesty" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs dynesty on the given lightcurves with the given priors. Returns
the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>results</em></p></li>
<li><p><em>ndof</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._run_folded_retrieval">
<code class="sig-name descname"><span class="pre">_run_folded_retrieval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcall</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlive</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlogz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./output_parameters'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summary_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurve_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./fitted_lightcurves'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dimgrey'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'multi'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._run_folded_retrieval" title="Permalink to this definition">¶</a></dt>
<dd><p>For each filter, runs retrieval, then produces a phase-folded
lightcurve. Then runs retrieval across wavelengths on the folded
curves.</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._run_full_retrieval">
<code class="sig-name descname"><span class="pre">_run_full_retrieval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcall</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlive</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlogz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./output_parameters'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summary_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurve_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./fitted_lightcurves'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dimgrey'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'multi'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._run_full_retrieval" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs full retrieval with no folding/batching etc. Just a straight
forward dynesty run.</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever._subset_to_full_index">
<code class="sig-name descname"><span class="pre">_subset_to_full_index</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subset_indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever._subset_to_full_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an index from notation within a batch to the full indexing.
Inverse of _full_to_subset_index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subset_indices</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The indices which define the full subset of light curves</p></li>
<li><p><strong>subset_index</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>3</em><em>, </em><em>)</em>) – The subset-notation index to be converted</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.retriever.Retriever.run_retrieval">
<code class="sig-name descname"><span class="pre">run_retrieval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ld_fit_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'independent'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitting_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlogz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./output_parameters'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurve_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./fitted_lightcurves'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summary_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dimgray'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'multi'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detrend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cadence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.retriever.Retriever.run_retrieval" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs dynesty on the data. Different modes exist and can be specified
using the kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ld_fit_method</strong> ({<cite>‘coupled’</cite>, <cite>‘single’</cite>, <cite>‘independent’</cite>, <cite>‘off’</cite>}, optional) – <p>Determines the mode of fitting of limb darkening parameters. The
available modes are:</p>
<blockquote>
<div><ul>
<li><p><cite>’coupled’</cite> : all limb darkening parameters are fitted
independently, but are coupled to a wavelength dependent
model based on the host parameters through <cite>ldkt</cite></p></li>
<li><p><cite>’single’</cite> : LD parameters are still tied to a model, but
only the first filter is actively fitted. The remaining
filters are estimated based off the ratios given by ldtk for
a host with the given parameters. This mode is useful for a
large number of filters, as <cite>‘coupled’</cite> or <cite>‘independent’</cite>
fitting will lead to much higher computation times.</p></li>
<li><p><cite>’independent’</cite> : Each LD coefficient is fitted separately for
each filter, with no coupling to the ldtk models.</p></li>
<li><p><cite>’off’</cite> : Will use the fixed value provided in the input file</p></li>
</ul>
</div></blockquote>
<p>Default is <cite>‘independent’</cite></p>
</p></li>
<li><p><strong>fitting_mode</strong> (<em>{'auto'</em><em>, </em><em>'all'</em><em>, </em><em>'folded'</em><em>, </em><em>'batched'}</em><em>, </em><em>optional</em>) – Determines if the fitting algorithm is limited by max_parameters.
If the number of parameters to be fitted exceeds max_parameters,
then the retrieval will split into fitting each filter
independently, phase-folding the detrended light curves to
produce a single light curve for each filter and then fitting
these phase-folded curves simultaneously. If fitting_mode is
<cite>‘auto’</cite>, then the mode used will be determined automatically.
If fitting_mode is <cite>‘all’</cite>, then all light curves will be
attempted to be fitted simultaneously, regardless of the
value of max_parameters. If fitting_mode
is <cite>‘folded’</cite>, then the folding approach will be used. Default is
<cite>‘auto’</cite>.</p></li>
<li><p><strong>max_parameters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The maximum number of parameters to use in a single retrieval.
Default is 25.</p></li>
<li><p><strong>maxiter</strong> (int or <cite>None</cite>, optional) – The maximum number of iterations to run. If <cite>None</cite>, will
continue until stopping criterion is reached. Default is <cite>None</cite>.</p></li>
<li><p><strong>maxcall</strong> (int or <cite>None</cite>, optional) – The maximum number of likelihood calls in retrieval. If None, will
continue until stopping criterion is reached. Default is <cite>None</cite>.</p></li>
<li><p><strong>sample</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Method used to sample uniformly within the likelihood constraint,
conditioned on the provided bounds. Unique methods available are:
uniform sampling within the bounds(‘unif’), random walks with fixed
proposals (‘rwalk’), random walks with variable (“staggering”)
proposals (‘rstagger’), multivariate slice sampling along preferred
orientations (‘slice’), “random” slice sampling along all
orientations (‘rslice’), “Hamiltonian” slices along random
trajectories (‘hslice’), and any callable function which follows
the pattern of the sample methods defined in dynesty.sampling.
‘auto’ selects the sampling method based on the dimensionality of
the problem (from ndim). When ndim &lt; 10, this defaults to ‘unif’.
When 10 &lt;= ndim &lt;= 20, this defaults to ‘rwalk’. When ndim &gt; 20,
this defaults to ‘hslice’ if a gradient is provided and ‘slice’
otherwise. ‘rstagger’ and ‘rslice’ are provided as alternatives for
‘rwalk’ and ‘slice’, respectively. Default is ‘auto’.</p></li>
<li><p><strong>nlive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of live points to use in the nested sampling retrieval.
Default is 300.</p></li>
<li><p><strong>dlogz</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Retrieval iteration will stop when the estimated contribution of
the remaining prior volume to the total evidence falls below this
threshold. Explicitly, the stopping criterion is
<cite>ln(z + z_est) - ln(z) &lt; dlogz</cite>, where z is the current evidence
from all saved samples and z_est is the estimated contribution from
the remaining volume. The default is <cite>1e-3 * (nlive - 1) + 0.01</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-transitfit.priorinfo">
<span id="prior-handling"></span><h2>Prior handling<a class="headerlink" href="#module-transitfit.priorinfo" title="Permalink to this headline">¶</a></h2>
<p>Object to handle and deal with prior info for retrieval</p>
<dl class="py class">
<dt id="transitfit.priorinfo.PriorInfo">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit.priorinfo.</span></code><code class="sig-name descname"><span class="pre">PriorInfo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">default_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limb_dark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_telescopes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_filters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_epochs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_ttv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Object to deal with anything involving priors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default_dict</strong> (<em>dictionary</em>) – Dictionary containing default parameter values.</p></li>
<li><p><strong>limb_dark</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The limb darkening model to use.</p></li>
<li><p><strong>n_telescopes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different telescopes used in the data set</p></li>
<li><p><strong>n_filters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different filters used in the data set</p></li>
<li><p><strong>n_epochs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different epochs used in the data set</p></li>
<li><p><strong>allow_ttv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will fit t0 to each transit. Default is False.</p></li>
<li><p><strong>lightcurves</strong> (<em>array_like</em><em>, </em><em>shape</em><em>(</em><em>n_telescopes</em><em>, </em><em>n_filters</em><em>, </em><em>n_epochs</em><em>)</em>) – Array of the light curves. If there is no observation for a particular
telescope, filter, epoch combination, then the value should be set to
None.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="transitfit.priorinfo.PriorInfo._convert_unit_cube">
<code class="sig-name descname"><span class="pre">_convert_unit_cube</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cube</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo._convert_unit_cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the unit cube provided by dynesty (all values between 0 and 1)
and converts them into physical values</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.priorinfo.PriorInfo._interpret_final_results">
<code class="sig-name descname"><span class="pre">_interpret_final_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo._interpret_final_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a dictionary of results and a dictionary of errors from the
final results of a run</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.priorinfo.PriorInfo._interpret_param_array">
<code class="sig-name descname"><span class="pre">_interpret_param_array</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo._interpret_param_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Interprets the parameter cube generated by dynesty and returns them in
a format usable by the LikelihoodCalculator</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.priorinfo.PriorInfo.add_gaussian_fit_param">
<code class="sig-name descname"><span class="pre">add_gaussian_fit_param</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo.add_gaussian_fit_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new parameter which will be fitted with a Gaussian prior</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.priorinfo.PriorInfo.add_uniform_fit_param">
<code class="sig-name descname"><span class="pre">add_uniform_fit_param</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_lim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_lim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo.add_uniform_fit_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new parameter which will be fitted uniformly in the range given
by low_lim and high_lim</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.priorinfo.PriorInfo.fit_detrending">
<code class="sig-name descname"><span class="pre">fit_detrending</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_index_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo.fit_detrending" title="Permalink to this definition">¶</a></dt>
<dd><p>Intialises detrending</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.priorinfo.PriorInfo.fit_limb_darkening">
<code class="sig-name descname"><span class="pre">fit_limb_darkening</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fit_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'independent'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_logg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_mc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo.fit_limb_darkening" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialises fitting of limb darkening parameters, either independently
or coupled across wavebands.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fit_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Determines the mode of fitting of LD parameters. The available
modes are:</p>
<blockquote>
<div><ul>
<li><p>’coupled’ : all limb darkening parameters are fitted
independently, but are coupled to a wavelength dependent
model based on the host parameters</p></li>
<li><p>’single’ : LD parameters are still tied to a model, but only
the first filter is actively fitted. The remaining filters
are estimated based off the ratios given by ldtk for a host
with the given parameters. This mode is useful for a large
number of filters, as ‘coupled’ or ‘independent’ fitting will
lead to much higher computation times.</p></li>
<li><p>’independent’ : Each LD coefficient is fitted separately for
each filter, with no coupling to the ldtk models.</p></li>
</ul>
</div></blockquote>
<p>The default is ‘independent’.</p>
</p></li>
<li><p><strong>host_T</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The effective temperature of the host star, in Kelvin, given as a
(value, uncertainty) pair. Must be provided if fit_method is
‘coupled’ or ‘single’. Default is None.</p></li>
<li><p><strong>host_logg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optionalor None</em><em>, </em><em>optional</em>) – The log_10 of the surface gravity of the host star, with gravity
measured in cm/s2. Should be given as a (value, uncertainty) pair.
Must be provided if fit_method is ‘coupled’ or ‘single’. Default is
None.</p></li>
<li><p><strong>host_z</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The metalicity of the host, given as a (value, uncertainty) pair.
Must be provided if fit_method is ‘coupled’ or ‘single’. Default is
None.</p></li>
<li><p><strong>filters</strong> (<em>array_like</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The set of filters, given in [low, high] limits for the wavelengths
with the wavelengths given in nanometers. The ordering of the
filters should correspond to the filter_idx parameter used
elsewhere. Must be provided if fit_method is ‘coupled’ or ‘single’.
Default is None.</p></li>
<li><p><strong>n_samples</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of limb darkening profiles to create. Passed to
ldtk.LDPSetCreator.create_profiles(). Default is 20000.</p></li>
<li><p><strong>do_mc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will use MCMC to estimate coefficient uncertainties more
accurately. Default is False.</p></li>
<li><p><strong>cache_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – This is the path to cache LDTK files to. If not specified, will
default to the LDTK default</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.priorinfo.PriorInfo.fit_normalisation">
<code class="sig-name descname"><span class="pre">fit_normalisation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.PriorInfo.fit_normalisation" title="Permalink to this definition">¶</a></dt>
<dd><p>When run, the Retriever will fit normalisation of the data as a
free parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lightcurves</strong> (np.array of <a href="#id3"><span class="problematic" id="id4">`</span></a>LightCurve`s, shape (n_telescopes, n_filters, n_epochs)) – <p>The array of LightCurves to be normalised. We can use the value of
fluxes to estimate a normalisation constant (c_n) range for each
light curve. We use</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">1/f_median</span> <span class="pre">-1</span> <span class="pre">&lt;=</span> <span class="pre">c_n</span> <span class="pre">&lt;=</span> <span class="pre">1/f_median</span> <span class="pre">+</span> <span class="pre">1</span></code></p>
</div></blockquote>
<p>as the default range, where f_median is the median flux value.</p>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="transitfit.priorinfo.setup_priors">
<code class="sig-prename descclassname"><span class="pre">transitfit.priorinfo.</span></code><code class="sig-name descname"><span class="pre">setup_priors</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ecc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limb_dark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_telescopes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_filters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_epochs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q3</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_ttv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.priorinfo.setup_priors" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory function to initialise a PriorInfo object</p>
<p>qX should either be a single value or a list of values length n_filters</p>
</dd></dl>

</div>
<div class="section" id="module-transitfit._limb_darkening_handler">
<span id="limb-darkening-handling"></span><h2>Limb darkening handling<a class="headerlink" href="#module-transitfit._limb_darkening_handler" title="Permalink to this headline">¶</a></h2>
<p>Class to handle limb darkening</p>
<dl class="py class">
<dt id="transitfit._limb_darkening_handler.LimbDarkeningHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit._limb_darkening_handler.</span></code><code class="sig-name descname"><span class="pre">LimbDarkeningHandler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">default_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._limb_darkening_handler.LimbDarkeningHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The LimbDarkeningHandler is designed to convert fitting parameters in
the range [0,1] and convert them into physically allowed values for
limb darkening coefficients for different models. This conversion is
based on Kipping 2013 <a class="reference external" href="https://arxiv.org/abs/1308.0009">https://arxiv.org/abs/1308.0009</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <dl class="simple">
<dt>The default limb darkening model to use. Accepted values are</dt><dd><ul>
<li><p>’linear’</p></li>
<li><p>’quadratic’</p></li>
<li><p>’squareroot’</p></li>
<li><p>’power2’</p></li>
<li><p>’nonlinear’</p></li>
</ul>
</dd>
</dl>
<p>This model will be the default for conversions unless otheriwse
specified.</p>
</p></li>
<li><p><strong>low_lim</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The lower limit to use in conversion in the case where there are
open bounds on a coefficient (power2 and nonlinear models). Note
that in order to conserve sampling density in all regions for the
power2 model, you should set lower_lim=-high_lim. Default is -5</p></li>
<li><p><strong>high_lim</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The upper limit to use in conversion in the case where there are
open bounds on a coefficient (power2 and nonlinear models). Note
that in order to conserve sampling density in all regions for the
power2 model, you should set lower_lim=-high_lim. Default is 5</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="transitfit._limb_darkening_handler.LimbDarkeningHandler.convert_qtou">
<code class="sig-name descname"><span class="pre">convert_qtou</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._limb_darkening_handler.LimbDarkeningHandler.convert_qtou" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes parameters q distributed between [0,1] and converts them into
physical values for limb darkening coefficients.</p>
<p>Conversions for quadratic, square root, and logarithmic are from
Kipping 2013 <a class="reference external" href="https://arxiv.org/abs/1308.0009">https://arxiv.org/abs/1308.0009</a> for two-parameter limb
darkening methods</p>
<p class="rubric">Notes</p>
<p>This is the inverse of convert_utoq</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._limb_darkening_handler.LimbDarkeningHandler.convert_qtou_with_errors">
<code class="sig-name descname"><span class="pre">convert_qtou_with_errors</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_err</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._limb_darkening_handler.LimbDarkeningHandler.convert_qtou_with_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts kipping parameters with errors into physical LDCs with errors</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._limb_darkening_handler.LimbDarkeningHandler.convert_utoq">
<code class="sig-name descname"><span class="pre">convert_utoq</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._limb_darkening_handler.LimbDarkeningHandler.convert_utoq" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes actual values of the LD coefficients and converts them to a
value q between [0,1].</p>
<p>Conversions for quadratic, square root, and logarithmic are from
Kipping 2013 <a class="reference external" href="https://arxiv.org/abs/1308.0009">https://arxiv.org/abs/1308.0009</a> for two-parameter limb
darkening methods</p>
<p class="rubric">Notes</p>
<p>This is the inverse of convert_qtou</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._limb_darkening_handler.LimbDarkeningHandler.get_required_coefficients">
<code class="sig-name descname"><span class="pre">get_required_coefficients</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._limb_darkening_handler.LimbDarkeningHandler.get_required_coefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the number of coefficients required for a given model and returns
a string name for each of the form ‘uX’ where X is a number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – Model to get the coefficients for. Default is self.default_model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>coeficient names</strong> – The coefficient names</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit._limb_darkening_handler.LimbDarkeningHandler.initialise_ldtk">
<code class="sig-name descname"><span class="pre">initialise_ldtk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_logg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_mc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._limb_darkening_handler.LimbDarkeningHandler.initialise_ldtk" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up an LDTKHandler to deal with interfacing between ldtk and
TransitFit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host_T</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The effective temperature of the host star, in Kelvin, given as a
(value, uncertainty) pair.</p></li>
<li><p><strong>host_logg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The log_10 of the surface gravity of the host star, with gravity
measured in cm/s2. Should be given as a (value, uncertainty) pair.</p></li>
<li><p><strong>host_z</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The metalicity of the host, given as a (value, uncertainty) pair.</p></li>
<li><p><strong>filters</strong> (<em>array_like</em>) – The set of filters, given in [low, high] limits for the wavelengths
with the wavelengths given in nanometers. The ordering of the
filters should correspond to the filter_idx parameter used
elsewhere.</p></li>
<li><p><strong>ld_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – The model of limb darkening to use. Allowed values are ‘linear’,
‘quadratic’, ‘squareroot’, ‘power2’, and ‘nonlinear’. If None, will
default to self.default_model. Default is None.</p></li>
<li><p><strong>n_samples</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of limb darkening profiles to create. Passed to
ldtk.LDPSetCreator.create_profiles(). Default is 20000.</p></li>
<li><p><strong>do_mc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will use MCMC to estimate coefficient uncertainties more
accurately. Default is False.</p></li>
<li><p><strong>cache_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – This is the path to cache LDTK files to. If not specified, will
default to the LDTK default</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit._limb_darkening_handler.LimbDarkeningHandler.ldtk_estimate">
<code class="sig-name descname"><span class="pre">ldtk_estimate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ld0_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._limb_darkening_handler.LimbDarkeningHandler.ldtk_estimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses LDTK to estimate the LDCs for all filters when given a set of LDCs
for filter 0, based on the ratios between the best values
found in initialisation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ld1_values</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><em>array_like</em>) – The LD parameters for filter 0</p></li>
<li><p><strong>ld_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The limb darkening model to use. Defaults to self.default_model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>all_ld_values</strong> – The estimated limb darkening parameters</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array_like, shape (n_filters, n_coeffs)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit._limb_darkening_handler.LimbDarkeningHandler.ldtk_lnlike">
<code class="sig-name descname"><span class="pre">ldtk_lnlike</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coeffs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._limb_darkening_handler.LimbDarkeningHandler.ldtk_lnlike" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses LDTK to evaluate the log likelihood for a set of coefficients.
Note that coeffs should be the values returned by convert_qtoA
and NOT the unit values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coeffs</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_filters</em><em>, </em><em>n_coeffs</em><em>)</em>) – The coefficients to evaluate the log likelihood for.</p></li>
<li><p><strong>ld_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The model to use. Defaults to self.default_model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>lnlike</strong> – The log likelihood of the coefficients</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)">float</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-transitfit._ldtk_handler">
<span id="ldtk-interfacing"></span><h2>LDTK interfacing<a class="headerlink" href="#module-transitfit._ldtk_handler" title="Permalink to this headline">¶</a></h2>
<p>Class to handle limb darkening parameters through PyLDTK</p>
<dl class="py class">
<dt id="transitfit._ldtk_handler.LDTKHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit._ldtk_handler.</span></code><code class="sig-name descname"><span class="pre">LDTKHandler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_logg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'quadratic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_mc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._ldtk_handler.LDTKHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The LDTKHandler provides an easy way to interface ldtk with TransitFit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host_T</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The effective temperature of the host star, in Kelvin, given as a
(value, uncertainty) pair.</p></li>
<li><p><strong>host_logg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The log_10 of the surface gravity of the host star, with gravity
measured in cm/s2. Should be given as a (value, uncertainty) pair.</p></li>
<li><p><strong>host_z</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The metalicity of the host, given as a (value, uncertainty) pair.</p></li>
<li><p><strong>filters</strong> (<em>array_like</em>) – The set of filters, given in [low, high] limits for the wavelengths
with the wavelengths given in nanometers if a uniform filter is to
be used, or [[wavelength…], [transmission]] if a fully-defined
profile is being used. The ordering of the filters should
correspond to the filter_idx parameter used elsewhere.</p></li>
<li><p><strong>ld_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The model of limb darkening to use. Allowed values are ‘linear’,
‘quadratic’, ‘squareroot’, ‘power2’, and ‘nonlinear’. Default is
‘quadratic’.</p></li>
<li><p><strong>n_samples</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The number of limb darkening profiles to create. Passed to
ldtk.LDPSetCreator.create_profiles(). Default is 20000.</p></li>
<li><p><strong>do_mc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will use MCMC to estimate coefficient uncertainties more
accurately. Default is False.</p></li>
<li><p><strong>cache_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – This is the path to cache LDTK files to. If not specified, will
default to the LDTK default</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="transitfit._ldtk_handler.LDTKHandler._extract_best_coeffs">
<code class="sig-name descname"><span class="pre">_extract_best_coeffs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ld_model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._ldtk_handler.LDTKHandler._extract_best_coeffs" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the best values for a limb darkening model for the filters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ld_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The limb darkening model to obtain the values for.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>coeffs</strong> (<em>array_like, shape (n_filters, n_coeffs)</em>) – The coefficients for each filter</p></li>
<li><p><strong>err</strong> (<em>array_like, shape (n_filters, n_coeffs)</em>) – The uncertainty on each of the coefficients</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit._ldtk_handler.LDTKHandler.estimate_values">
<code class="sig-name descname"><span class="pre">estimate_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ld0_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._ldtk_handler.LDTKHandler.estimate_values" title="Permalink to this definition">¶</a></dt>
<dd><p>If given a set of LD param values for filter 0, will estimate the LD
parameters for all filters based on the ratios between the best values
found in initialisation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ld1_values</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><em>array_like</em>) – The LD parameters for filter 0</p></li>
<li><p><strong>ld_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The limb darkening model to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>all_ld_values</strong> – The estimated limb darkening parameters</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array_like, shape (n_filters, n_coeffs)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit._ldtk_handler.LDTKHandler.lnlike">
<code class="sig-name descname"><span class="pre">lnlike</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coeffs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._ldtk_handler.LDTKHandler.lnlike" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the log likelihood for a set of coefficients</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coeffs</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_filters</em><em>, </em><em>n_coeffs</em><em>)</em>) – The coefficients to evaluate the log likelihood for.</p></li>
<li><p><strong>ld_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The model to use. Defaults to self.default_model</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-transitfit._likelihood">
<span id="likelihood-calculations"></span><h2>Likelihood calculations<a class="headerlink" href="#module-transitfit._likelihood" title="Permalink to this headline">¶</a></h2>
<p>Module to calculate the likelihood of a set of parameters</p>
<dl class="py class">
<dt id="transitfit._likelihood.LikelihoodCalculator">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit._likelihood.</span></code><code class="sig-name descname"><span class="pre">LikelihoodCalculator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._likelihood.LikelihoodCalculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Object to quickly calculate the likelihood of a set of parameters to
fit a given set of light curves.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lightcurves</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_telescopes</em><em>, </em><em>n_filters</em><em>, </em><em>n_epochs</em><em>)</em>) – An array of LightCurves. If no data exists for a point in the array
then the entry should be <cite>None</cite>.</p></li>
<li><p><strong>priors</strong> (<a class="reference internal" href="#transitfit.priorinfo.PriorInfo" title="transitfit.priorinfo.PriorInfo"><em>PriorInfo</em></a>) – The PriorInfo object for retrieval</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="transitfit._likelihood.LikelihoodCalculator.find_likelihood">
<code class="sig-name descname"><span class="pre">find_likelihood</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_full_times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._likelihood.LikelihoodCalculator.find_likelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the likelihood of a set of parameters</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._likelihood.LikelihoodCalculator.update_params">
<code class="sig-name descname"><span class="pre">update_params</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ecc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limb_dark</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._likelihood.LikelihoodCalculator.update_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates self.params with values given</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-transitfit.detrender">
<span id="detrending"></span><h2>Detrending<a class="headerlink" href="#module-transitfit.detrender" title="Permalink to this headline">¶</a></h2>
<p>detrender.py</p>
<p>A module to deal with arbitrary detrending</p>
<dl class="py class">
<dt id="transitfit.detrender.DetrendingFunction">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit.detrender.</span></code><code class="sig-name descname"><span class="pre">DetrendingFunction</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.detrender.DetrendingFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The DetrendingFunction is designed to handle detrending with an arbitrary
function.</p>
<p>Basically gets around dealing with varying number of args in a neat way</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> (<em>function</em>) – The detrending function. Must have signature of f(times, a, b, c…)
where a, b, c etc are the detrending coefficients.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-transitfit.detrending_funcs"></span><p>Some detrending functions for use with LightCurve</p>
<dl class="py class">
<dt id="transitfit.detrending_funcs.NthOrderDetrendingFunction">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit.detrending_funcs.</span></code><code class="sig-name descname"><span class="pre">NthOrderDetrendingFunction</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.detrending_funcs.NthOrderDetrendingFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Arbitrary order detrending function which conserves flux</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The detrending function order. Must be greater than 0.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-transitfit.output_handler">
<span id="input-and-output"></span><h2>Input and output<a class="headerlink" href="#module-transitfit.output_handler" title="Permalink to this headline">¶</a></h2>
<p>Object to deal with writing fitting results to files</p>
<dl class="py class">
<dt id="transitfit.output_handler.OutputHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit.output_handler.</span></code><code class="sig-name descname"><span class="pre">OutputHandler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_prior</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Designed to handle writing outputs from retrieval to files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lightcurves</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_telescopes</em><em>, </em><em>n_filters</em><em>, </em><em>n_epochs</em><em>)</em>) – The full lightcurves array to be retrieved.</p></li>
<li><p><strong>full_prior</strong> (<a class="reference internal" href="#transitfit.priorinfo.PriorInfo" title="transitfit.priorinfo.PriorInfo"><em>PriorInfo</em></a>) – The prior for the complete light curve dataset.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._batch_to_full_idx">
<code class="sig-name descname"><span class="pre">_batch_to_full_idx</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_ttv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._batch_to_full_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a batch index into a full index</p>
<dl class="simple">
<dt>i<span class="classifier">tuple</span></dt><dd><p>(batch_tidx, batch_fidx, batch_eidx)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(tidx, fidx, eidx)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._initialise_batman">
<code class="sig-name descname"><span class="pre">_initialise_batman</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_lightcurves</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._initialise_batman" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up batman so we can generate best-fit models for outputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>all_lightcurves</strong> (<em>array_like</em>) – Array containing the global set of light curves</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._initialise_best_model">
<code class="sig-name descname"><span class="pre">_initialise_best_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_prior</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._initialise_best_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the best fit model used to output best fit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The fitting mode being used</p></li>
<li><p><strong>global_prior</strong> (<a class="reference internal" href="#transitfit.priorinfo.PriorInfo" title="transitfit.priorinfo.PriorInfo"><em>PriorInfo</em></a>) – The full_prior from the retriever. Used to determine array shapes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>best_model</strong> – A dictionary containing param arrays of the best values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>To do this, we go through all output parameter files and pull in the
values. In folded mode, we pull in from the global summary first and
add from the filter summaries after</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._initialise_dict_entry">
<code class="sig-name descname"><span class="pre">_initialise_dict_entry</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prior</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._initialise_dict_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialises param in results dictionaries using ParamArray</p>
<p>If prior is not provided, defaults to self.full_prior</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._plot_data">
<code class="sig-name descname"><span class="pre">_plot_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux_err</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_phase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_curve</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">residuals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(12,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dimgrey'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cadence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned_colour</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._plot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the lightcurve and model consistently</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cadence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – The cadence to bin to in phase, <em>not</em> minutes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._plot_samples">
<code class="sig-name descname"><span class="pre">_plot_samples</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prior</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._plot_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a corner plot of the samples from a result</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._print_results">
<code class="sig-name descname"><span class="pre">_print_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._print_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a results dict to terminal</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._quicksave_result">
<code class="sig-name descname"><span class="pre">_quicksave_result</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_output_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./outputs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._quicksave_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Quickly saves a batch result to file and pickle the Result and Prior
objects</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._results_dict_to_dataframe">
<code class="sig-name descname"><span class="pre">_results_dict_to_dataframe</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batched</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._results_dict_to_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a results dict to a pandas dataframe</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler._save_results_dict">
<code class="sig-name descname"><span class="pre">_save_results_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batched</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler._save_results_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a dict to csv</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler.add_best_u">
<code class="sig-name descname"><span class="pre">add_best_u</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">best_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combined_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler.add_best_u" title="Permalink to this definition">¶</a></dt>
<dd><p>Given results dicts, adds in the u vals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>best_dict</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – The dictionary of best results</p></li>
<li><p><strong>combined_dict</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – The full results</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>best_dict</strong> (<em>dict</em>) – The same dictionary with the best u vals added.</p></li>
<li><p><strong>combined_dict</strong> (<em>dict</em>) – The same dictionary with the u vals added.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler.combine_results_dicts">
<code class="sig-name descname"><span class="pre">combine_results_dicts</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results_dicts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler.combine_results_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines the given results dicts into one dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results_dicts</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_batches</em><em>, </em><em>)</em>) – The results_dicts obtained from get_results_dict</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>combined_dict</strong> – The combined results dictionary. Each entry is a list of values
from the results dictionaries -
[[best value, median, 16th percentile, 84th percentile, stdev],…]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler.get_best_vals">
<code class="sig-name descname"><span class="pre">get_best_vals</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results_dicts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_ld</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_combined</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler.get_best_vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the best values for a set of runs from the given results dicts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>results_dicts</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_batches</em><em>, </em><em>)</em>) – The results_dicts obtained from get_results_dict</p></li>
<li><p><strong>fit_ld</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Should be True if LDC fitting. Default is True</p></li>
<li><p><strong>return_combined</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will return the results dicts combined into a single dict.
Default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>best_vals</strong> (<em>dict</em>) – Each entry is [best val, error]</p></li>
<li><p><strong>combined_dict</strong> (<em>dict</em>) – The combined results dictionary. Returned if return_combined is
True</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler.get_results_dict">
<code class="sig-name descname"><span class="pre">get_results_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler.get_results_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes dictionaries of results from a single dynesty run.</p>
<p>Useful for putting results in a form which allows for easy summary etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>results</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – Results from a single dynesty run</p></li>
<li><p><strong>priors</strong> (<a class="reference internal" href="#transitfit.priorinfo.PriorInfo" title="transitfit.priorinfo.PriorInfo"><em>PriorInfo</em></a>) – The priors for the run</p></li>
<li><p><strong>lightcurves</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_telescopes</em><em>, </em><em>n_filters</em><em>, </em><em>n_epochs</em><em>)</em>) – The lightcurves for the run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>results_dict</strong> – Each entry is [best value, median, 16th percentile, 84th percentile, stdev]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler.plot_final_light_curves">
<code class="sig-name descname"><span class="pre">plot_final_light_curves</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_prior</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(12,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dimgrey'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_folded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">titles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cadence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binned_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler.plot_final_light_curves" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the detrended light curves with the global best-fit model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cadence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The cadence to bin to in minutes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler.save_complete_results">
<code class="sig-name descname"><span class="pre">save_complete_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_prior</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler.save_complete_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Once all batches etc are run, collates all results and saves to csv</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler.save_final_light_curves">
<code class="sig-name descname"><span class="pre">save_final_light_curves</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_prior</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./final_light_curves'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler.save_final_light_curves" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the final curves and best fit model to file</p>
<p>Requires best model to be initialised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>all_lightcurves</strong> (<em>array_like</em>) – Array containing the global set of light curves - these should be
raw and not normalised or detrended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.output_handler.OutputHandler.save_results">
<code class="sig-name descname"><span class="pre">save_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./output_parameters'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summary_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full_output.csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples_plot_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./plots'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_posteriors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.output_handler.OutputHandler.save_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves results to .csv files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>results</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_batches</em><em>, </em><em>)</em>) – The results from each run</p></li>
<li><p><strong>priors</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_batches</em><em>, </em><em>)</em>) – The priors for each run</p></li>
<li><p><strong>lightcurves</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_batches</em><em>, </em><em>)</em>) – The light curves for each run</p></li>
<li><p><strong>fit_ld</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Must be true if LDCs are fitted. Default is True</p></li>
<li><p><strong>output_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The folder to save output files to (not plots). Default is
<cite>‘./output_parameters’</cite></p></li>
<li><p><strong>summary_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The file name for the final output. This file only gives the
averaged values, rather than individual values fitted within
batches if there are any. Default is <cite>‘summary_output.csv’</cite></p></li>
<li><p><strong>full_output_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The file name for the full output file. This file gives partial
results from batches, rather than the averaged results. Default is
<cite>‘full_output.csv’</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>best_vals</strong> (<em>dict</em>) – Each entry is [best val, error]</p></li>
<li><p><strong>combined_dict</strong> (<em>dict</em>) – The combined results dictionary. Each entry is a list of values
from the results dictionaries -
[[best value, median, 16th percentile, 84th percentile, stdev],…]</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-transitfit.io"></span><p>Module to deal with all the reading in of inputs, as well as printing final results to terminal</p>
<dl class="py function">
<dt id="transitfit.io._read_data_csv">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">_read_data_csv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">usecols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io._read_data_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a path to a csv with columns [time, flux, errors], will get
all the data in a way which can be used by the Retriever</p>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io._read_data_txt">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">_read_data_txt</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skiprows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">usecols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io._read_data_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a txt data file with columns</p>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.get_filter_path">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">get_filter_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.get_filter_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a path or name of a default provided filter is given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The input string from the filter file input</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>path</strong> – The path to the relevant filter</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.parse_data_path_list">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">parse_data_path_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.parse_data_path_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a list of paths to data files and places them into an array which
can be passed to read_data_file_array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data_path_list</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_light_curves</em><em>, </em><em>5</em><em>)</em>) – The list of paths. Each row should contain
[data path, telescope idx, filter idx, epoch idx, detrending idx]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>data_path_array</strong> (<em>array_like, shape (num_filters, num_epochs, num_telescopes)</em>) – The paths inserted into an array which can be used by TransitFit</p></li>
<li><p><strong>detrending_index_array</strong> (<em>array_like, shape (num_filters, num_epochs, num_telescopes)</em>) – The array of detrending model indices for each light curve</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.parse_filter_list">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">parse_filter_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nanometers'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.parse_filter_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a list of filter information into a usable form for the <cite>‘filters’</cite>
argument in PriorInfo.fit_limb_darkening.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter_list</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_filters</em><em>, </em><em>3</em><em>)</em>) – The information on the filters. Each row should contain
[filter_index, low wavelength/file path, high wavelength]
The filter indices should refer to the indices used in the priors file.
Wavelengths should be in nm.</p></li>
<li><p><strong>delimiter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The delimiter used in filter profile files. Default is None, which
automatically detects using csv.Sniffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>filter_info</strong> – The filter information pass to PriorInfo.fit_limb_darkening.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array, shape (n_filters, 2)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.parse_priors_list">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">parse_priors_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">priors_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_telescopes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_filters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_epochs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ld_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded_P</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded_t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_ttv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suppress_warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.parse_priors_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a list of priors to produce a PriorInfo with all fitting parameters
initialised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>priors_list</strong> (<em>array_like</em><em>, </em><em>shape</em><em>(</em><em>X</em><em>, </em><em>5</em><em>)</em>) – A list of prior information for each variable to be fitted. Can also
set fixed values by setting the low and high values to <cite>None</cite> or
<cite>np.nan</cite>. Each row should be of the form
[key, mode, input A, input B, filter index]</p></li>
<li><p><strong>n_telescopes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different telescopes being used. Required so that
simultaneous observations from different observatories can be used by
TransitFit</p></li>
<li><p><strong>n_filters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different filters being used</p></li>
<li><p><strong>n_epochs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different epochs being used</p></li>
<li><p><strong>ld_model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The limb darkening model to use</p></li>
<li><p><strong>filter_indices</strong> (<em>array_like</em><em>, </em><em>optional</em>) – If provided, will only initialise fitting for parameters which are
relevant to the filter indices given. Note that this will result in
a difference between the filter indices used at the top, user level and
those used within this PriorInfo</p></li>
<li><p><strong>folded</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will not initialise P or t0 from the priors list. Instead will
use folded_P and folded_t0 to set fixed values. Default is False</p></li>
<li><p><strong>folded_P</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Required if folded is True. This is the period that the light curves
are folded to</p></li>
<li><p><strong>folded_t0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Required if folded is True. This is the t0 that the light curves are
folded to</p></li>
<li><p><strong>host_radius</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The host radius in Solar radii. If this is provided, then will assume
that the orbital separation is given in AU rather than host radii and
will convert the values accordingly</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>priors</strong> – The fully initialised PriorInfo which can then be used in fitting.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#transitfit.priorinfo.PriorInfo" title="transitfit.priorinfo.PriorInfo">PriorInfo</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.print_results">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">print_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priorinfo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_dof</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.print_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the results nicely to terminal</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>results</strong> (<em>dynesty.results.Results</em>) – The Dynesty results object, but must also have weights, cov and
uncertainties as entries.</p></li>
<li><p><strong>priorinfo</strong> (<a class="reference internal" href="#transitfit.priorinfo.PriorInfo" title="transitfit.priorinfo.PriorInfo"><em>transitfit.priorinfo.PriorInfo</em></a>) – The PriorInfo object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.read_data_file">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">read_data_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skiprows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">usecols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.read_data_file" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Reads a file in, assuming that it is either a:</dt><dd><p>.csv
.txt</p>
</dd>
</dl>
<p>with columns in the order time, depth, errors. Note that TransitFit assumes
BJD times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Full path to the file to be loaded</p></li>
<li><p><strong>skiprows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of rows to skip in reading txt file (to avoid headers)</p></li>
<li><p><strong>folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em>, </em><em>optional</em>) – If not None, this folder will be prepended to all the paths. Default is
None.</p></li>
<li><p><strong>usecols</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><em>sequence</em><em>, </em><em>optional</em>) – Which columns to read, with 0 being the first. For example,
<code class="docutils literal notranslate"><span class="pre">usecols</span> <span class="pre">=</span> <span class="pre">(1,4,5)</span></code> will extract the 2nd, 5th and 6th columns.
These should be given in the order time, flux, uncertainty
The default, None, results in all columns being read.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>times</strong> (<em>np.array</em>) – The times of the data series</p></li>
<li><p><strong>flux</strong> (<em>np.array</em>) – The flux</p></li>
<li><p><strong>error</strong> (<em>np.array</em>) – The uncertainty on the flux</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.read_data_path_array">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">read_data_path_array</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skiprows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.read_data_path_array" title="Permalink to this definition">¶</a></dt>
<dd><p>If passed an array of paths, will read in to produce an array of
<a href="#id5"><span class="problematic" id="id6">`</span></a>LightCurve`s</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data_path_array</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_telescopes</em><em>, </em><em>n_filters</em><em>, </em><em>n_epochs</em><em>)</em>) – Array with paths to data to load</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>lightcurves</strong> – The data loaded and stored as an array of LightCurves</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array of <a href="#id7"><span class="problematic" id="id8">`</span></a>LightCurve`s, shape (n_telescopes, n_filters, n_epochs)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.read_filter_info">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">read_filter_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nanometers'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.read_filter_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in information on the filters from .csv file and puts them in a
format which can be passed to the <code class="docutils literal notranslate"><span class="pre">filters</span></code> argument in
PriorInfo.fit_limb_darkening.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <p>Path to the .csv file containing the information on the filters. This
file should have three columns:</p>
<div class="line-block">
<div class="line">filter_idx  |   low_wl_or_path  |   high_wl |</div>
</div>
<p>Filters can either be specified as uniform between low_wl and high_wl,
or a full profile can be passed through a file. Filter profile files
must be two columns, giving wavelength and transmission fraction in
range [0,1].
The filter indices should refer to the indices used in the priors file.
All wavelengths should be in nm.</p>
</p></li>
<li><p><strong>delimiter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The delimiter used in filter profile files. Default is None, which
automatically detects using csv.Sniffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>filter_info</strong> – The filter information pass to PriorInfo.fit_limb_darkening.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array, shape (n_filters, 2)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.read_input_file">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">read_input_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skiprows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.read_input_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in a file with listed inputs and produces data arrays for use in
retrieval.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <p>The path to the .csv file with the paths to input parameters and
their telescope, filter, epoch, and detrending indices.</p>
<div class="line-block">
<div class="line">path  |  telescope  |  filter  |  epoch  |  detrending  |</div>
</div>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>lightcurves</strong> (np.array of <a href="#id9"><span class="problematic" id="id10">`</span></a>LightCurve`s, shape (n_telescopes, n_filters, n_epochs)) – The data loaded and stored as an array of LightCurves</p></li>
<li><p><strong>detrending_index_array</strong> (<em>array_like, shape (n_telescopes, n_filters, n_epochs)</em>) – The detrending indices for each lightcurve</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.read_priors_file">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">read_priors_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_telescopes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_filters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_epochs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limb_dark</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'quadratic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded_P</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded_t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_ttv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suppress_warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.read_priors_file" title="Permalink to this definition">¶</a></dt>
<dd><p>If given a csv file containing priors, will produce a PriorInfo object
based off the given values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <p>Path to .csv file containing the priors.</p>
<div class="line-block">
<div class="line">key  |   mode  |  input_A  |   input_B   |  filter  |</div>
</div>
<p>The available modes and the expected values of inputs A and B are:</p>
<ul>
<li><dl class="simple">
<dt>’uniform’: input A should be lower limit, input B should be upper</dt><dd><p>limit</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’gaussian’: input_A should be mean, input_B should be standard</dt><dd><p>deviation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’fixed’: input_A should be the fixed value. input_B is not used and</dt><dd><p>should be left blank.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>n_telescopes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different telescopes being used. Required so that
simultaneous observations from different observatories can be used by
TransitFit</p></li>
<li><p><strong>n_filters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different filters being used</p></li>
<li><p><strong>n_epochs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The number of different epochs being used</p></li>
<li><p><strong>limb_dark</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <dl class="simple">
<dt>The model of limb darkening you want to use. Accepted are</dt><dd><ul>
<li><p>linear</p></li>
<li><p>quadratic</p></li>
<li><p>squareroot</p></li>
<li><p>power2</p></li>
<li><p>nonlinear</p></li>
</ul>
</dd>
</dl>
<p>Default is quadratic</p>
</p></li>
<li><p><strong>filter_indices</strong> (<em>array_like</em><em>, </em><em>optional</em>) – If provided, will only initialise fitting for parameters which are
relevant to the filter indices given. Note that this will result in
a difference between the filter indices used at the top, user level and
those used within this PriorInfo</p></li>
<li><p><strong>folded</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will not initialise P or t0 from the priors list. Instead will
use folded_P and folded_t0 to set fixed values. Default is False</p></li>
<li><p><strong>folded_P</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Required if folded is True. This is the period that the light curves
are folded to</p></li>
<li><p><strong>folded_t0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Required if folded is True. This is the t0 that the light curves are
folded to</p></li>
<li><p><strong>host_radius</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The host radius in Solar radii.
If this is provided, then will assume that the orbital separation is
given in AU rather than host radii and will convert the values
accordingly.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Detrending currently cannot be initialised in the prior file. It will be
available as a kwarg in the pipeline function</p>
</dd></dl>

<dl class="py function">
<dt id="transitfit.io.save_final_light_curves">
<code class="sig-prename descclassname"><span class="pre">transitfit.io.</span></code><code class="sig-name descname"><span class="pre">save_final_light_curves</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priorinfo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./final_light_curves'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.io.save_final_light_curves" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies detrending and normalisation to each light curve and saves to .csv</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lightcurves</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_telescopes</em><em>, </em><em>n_filters</em><em>, </em><em>n_epochs</em><em>)</em>) – An array of LightCurves. If no data exists for a point in the array
then the entry should be <cite>None</cite>.</p></li>
<li><p><strong>priorinfo</strong> (<a class="reference internal" href="#transitfit.priorinfo.PriorInfo" title="transitfit.priorinfo.PriorInfo"><em>transitfit.priorinfo.PriorInfo</em></a>) – The PriorInfo object</p></li>
<li><p><strong>results</strong> (<em>dynesty.results.Results</em>) – The Dynesty results object, but must also have weights, cov and
uncertainties as entries.</p></li>
<li><p><strong>folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The folder to save the files to. Default is ‘./final_light_curves’</p></li>
<li><p><strong>folded</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will assume that the lightcurves provided are folded and
will change the filenames accordingly. Default is False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-transitfit.lightcurve">
<span id="parameter-handling"></span><h2>Parameter handling<a class="headerlink" href="#module-transitfit.lightcurve" title="Permalink to this headline">¶</a></h2>
<p>LightCurve objects for TransitFit</p>
<dl class="py class">
<dt id="transitfit.lightcurve.LightCurve">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit.lightcurve.</span></code><code class="sig-name descname"><span class="pre">LightCurve</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">times</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">curve_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The transit data which we are trying to fit.</p>
<p>The LightCurve is designed
to simplify dealing with detrending etc across multiple data sets. It
allows us to clearly keep values pointed at specific data sets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>times</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>X</em><em>, </em><em>)</em>) – The times of observation</p></li>
<li><p><strong>flux</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>X</em><em>, </em><em>)</em>) – The fluxes</p></li>
<li><p><strong>errors</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>X</em><em>, </em><em>)</em>) – The absolute uncertainty on the fluxes</p></li>
<li><p><strong>telescope_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The telescope index associated with this light curve</p></li>
<li><p><strong>filter_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The filter index associated with this light curve</p></li>
<li><p><strong>epoch_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The epoch index associated with this light curve</p></li>
<li><p><strong>curve_labels</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>X</em><em>, </em><em>)</em><em>, </em><em>optional</em>) – Used to identify if different data points come from different
observations. Useful when combining curves if you want to undo that!</p></li>
<li><p><strong>telescope_array</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>X</em><em>, </em><em>)</em><em>, </em><em>optional</em>) – Array of the telescope indices for each data point. Useful when dealing
with combined curves.</p></li>
<li><p><strong>filter_array</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>X</em><em>, </em><em>)</em><em>, </em><em>optional</em>) – Array of the filter indices for each data point. Useful when dealing
with combined curves.</p></li>
<li><p><strong>epoch_array</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>X</em><em>, </em><em>)</em><em>, </em><em>optional</em>) – Array of the epoch indices for each data point. Useful when dealing
with combined curves.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.bin">
<code class="sig-name descname"><span class="pre">bin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cadence</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">residuals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bins the light curve to a given observation cadence</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cadence</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – The observation cadence to bin to in the units of self.times</p></li>
<li><p><strong>residuals</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>n_times</em><em>,</em><em>)</em>) – If provided, will also bin any model residuals</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>time</strong> (<em>array_like</em>) – The time centers of each bin</p></li>
<li><p><strong>flux</strong> (<em>array_like</em>) – The flux in each bin, calculated as the weighted mean of all flux
values in the bin</p></li>
<li><p><strong>err</strong> (<em>array_like</em>) – The error on the flux of each bin</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.combine">
<code class="sig-name descname"><span class="pre">combine</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines the LightCurve with a list of other lightcurves which are passed to it
and returns a new lightcurve containing all the data of the input
curves. Note that you should probably only do this with lightcurves
which have already been detrended, otherwise you might struggle
to detrend the combined one.</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.create_detrended_LightCurve">
<code class="sig-name descname"><span class="pre">create_detrended_LightCurve</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.create_detrended_LightCurve" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a detrended LightCurve using detrend_flux() and returns it</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.decombine">
<code class="sig-name descname"><span class="pre">decombine</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.decombine" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a lightcurve according to its curve labels.</p>
<p>Inverse of combine</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.detrend_flux">
<code class="sig-name descname"><span class="pre">detrend_flux</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_full_times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_phase_space</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_normalise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.detrend_flux" title="Permalink to this definition">¶</a></dt>
<dd><p>When given a normalisation constant and some detrending parameters,
will return the detrended flux and errors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>array_like</em><em>, </em><em>shape</em><em>(</em><em>n_detrending_params</em><em>,</em><em>)</em>) – Array of the detrending parameters to use</p></li>
<li><p><strong>norm</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The normalisation constant to use. Default is 1</p></li>
<li><p><strong>use_full_times</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will use the full BJD value of the times. If False, will
subtract the integer part of self.times[0] from all the time values
before passing to the detrending function. Default is False</p></li>
<li><p><strong>use_phase_space</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, will phase fold the light curve before detrending. This
is an alternative approach to removing the full BJD part of times.
Requires t0 and P to be provided</p></li>
<li><p><strong>t0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The t0 value ot use when phase folding.</p></li>
<li><p><strong>P</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The period to phase fold to</p></li>
<li><p><strong>force_normalise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Override to allow normalisation to be forced if the LightCurve does
not have normalisation initialised. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>detrend_flux</strong> (<em>array_like, shape(num_times)</em>) – The detrended flux</p></li>
<li><p><strong>detrended_errors</strong> (<em>array_like, shape(num_times)</em>) – The errors on the detrended flux</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.estimate_normalisation_limits">
<code class="sig-name descname"><span class="pre">estimate_normalisation_limits</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.estimate_normalisation_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the range for fitting a normalisation constant, and also
finds a reasonable first guess.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>median_factor</strong> (<em>float</em>) – The initial best guess factor</p></li>
<li><p><strong>low_factor</strong> (<em>float</em>) – The low limit on the normalisation factor</p></li>
<li><p><strong>high_factor</strong> (<em>float</em>) – The high limit on the normalisation factor</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt>We use</dt><dd><p><code class="docutils literal notranslate"><span class="pre">1/f_max</span> <span class="pre">&lt;=</span> <span class="pre">c_n</span> <span class="pre">&lt;=</span> <span class="pre">1/f_min</span></code></p>
</dd>
</dl>
<p>as the default range.</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.fold">
<code class="sig-name descname"><span class="pre">fold</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.fold" title="Permalink to this definition">¶</a></dt>
<dd><p>Folds the LightCurve so that all times are between t0 - period/2 and
t0 + period/2.</p>
<p>If base_t0 is provided, this will ensure that the folded lightcurve is
centred on base_t0. This is to allow for ttv mode where the differences
between the retrieved t0 for each empoch must be accounted for.</p>
<p>returns a new LightCurve</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.get_phases">
<code class="sig-name descname"><span class="pre">get_phases</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.get_phases" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts times into phase given t0 and P values, with t0 at phase=0.5</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.save">
<code class="sig-name descname"><span class="pre">save</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the LightCurve to a .csv file</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.set_detrending">
<code class="sig-name descname"><span class="pre">set_detrending</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.set_detrending" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets detrending method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <dl class="simple">
<dt>Accepted</dt><dd><ul>
<li><p>’nth order’</p></li>
<li><p>’custom’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – The order of detrending to use if method is ‘nth order’. Must be
provided.</p></li>
<li><p><strong>function</strong> (<em>function</em><em>, </em><em>optional</em>) – If method is ‘custom’, this is the custom detrending function to
use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.set_normalisation">
<code class="sig-name descname"><span class="pre">set_normalisation</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.set_normalisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns on normalisation. Also estimates limits and a best initial guess.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>default_low</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The lowest value to consider as a multiplicative normalisation
constant. Default is 0.1.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>median_factor</strong> (<em>float</em>) – The initial best guess factor</p></li>
<li><p><strong>low_factor</strong> (<em>float</em>) – The low limit on the normalisation factor</p></li>
<li><p><strong>high_factor</strong> (<em>float</em>) – The high limit on the normalisation factor</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt>We use</dt><dd><p><code class="docutils literal notranslate"><span class="pre">1/f_median</span> <span class="pre">-1</span> <span class="pre">&lt;=</span> <span class="pre">c_n</span> <span class="pre">&lt;=</span> <span class="pre">1/f_median</span> <span class="pre">+</span> <span class="pre">1</span></code></p>
</dd>
</dl>
<p>as the default range, where f_median is the median flux value.</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit.lightcurve.LightCurve.split">
<code class="sig-name descname"><span class="pre">split</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.lightcurve.LightCurve.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the LightCurve into multiple LightCurves containing a single
transit. This is useful for dealing with multi-epoch observations which
contain TTVs, or have long term periodic trends, since single-epoch
observation trends can be approximated with polynomial fits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – The centre of a transit</p></li>
<li><p><strong>P</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – The estimated period of the planet in days</p></li>
<li><p><strong>t14</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The approximate transit duration in minutes.</p></li>
<li><p><strong>cutoff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – If there are no data within t14 * cutoff of t0, a period will be
discarded. Default is 0.25</p></li>
<li><p><strong>window</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – If provided, data outside of the range [t0 ± (0.5 * t14) * window]
will be discarded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>lightcurves</strong> – A list of LightCurve objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Will reset the telescope, filter and epoch indices to None.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-transitfit._params"></span><p>A class for parameters in TransitFit which can be retrieved. These are used
by the PriorInfo to determine dimensionality etc.</p>
<dl class="py class">
<dt id="transitfit._params._GaussianParam">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit._params.</span></code><code class="sig-name descname"><span class="pre">_GaussianParam</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">best</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._params._GaussianParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#transitfit._params._Param" title="transitfit._params._Param"><code class="xref py py-class docutils literal notranslate"><span class="pre">transitfit._params._Param</span></code></a></p>
<dl class="py method">
<dt id="transitfit._params._GaussianParam.from_unit_interval">
<code class="sig-name descname"><span class="pre">from_unit_interval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._params._GaussianParam.from_unit_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to convert value u in range (0,1], will convert to a value to
be used by Batman</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="transitfit._params._Param">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit._params.</span></code><code class="sig-name descname"><span class="pre">_Param</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uncertainty</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._params._Param" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="transitfit._params._Param.from_unit_interval">
<code class="sig-name descname"><span class="pre">from_unit_interval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._params._Param.from_unit_interval" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="transitfit._params._UniformParam">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit._params.</span></code><code class="sig-name descname"><span class="pre">_UniformParam</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">low_lim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_lim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._params._UniformParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#transitfit._params._Param" title="transitfit._params._Param"><code class="xref py py-class docutils literal notranslate"><span class="pre">transitfit._params._Param</span></code></a></p>
<dl class="py method">
<dt id="transitfit._params._UniformParam.from_unit_interval">
<code class="sig-name descname"><span class="pre">from_unit_interval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._params._UniformParam.from_unit_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to convert value u in range (0,1], will convert to a value to
be used by Batman</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-transitfit._paramarray"></span><dl class="py class">
<dt id="transitfit._paramarray.ParamArray">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">transitfit._paramarray.</span></code><code class="sig-name descname"><span class="pre">ParamArray</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_dependent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_dependent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_dependent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightcurves</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The _ParamArray is designed to handle parameters which are being fitted
by TransitFit. It can deal with parameters which are being fitted over
different combinations of telescope, filter, and epoch</p>
<p>If a parameter is lightcurve specific, providing lightcurves will
ensure that only parameters where a lightcurve exists will be
initialised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The parameter name</p></li>
<li><p><strong>shape</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The shape of the array to use</p></li>
<li><p><strong>telescope_dependent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Set to True if the parameter varies across telescopes</p></li>
<li><p><strong>filter_dependent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Set to True if the parameter varies across filters</p></li>
<li><p><strong>epoch_dependent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Set to True if the parameter varies across epoch</p></li>
<li><p><strong>default_value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – The default value for the parameter</p></li>
<li><p><strong>lightcurves</strong> (<em>array-like</em><em>, </em><em>shape</em><em>(</em><em>shape</em><em>)</em><em>, </em><em>optional</em>) – The array of relevant light curves.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="transitfit._paramarray.ParamArray._generate_idx">
<code class="sig-name descname"><span class="pre">_generate_idx</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray._generate_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the given indices and converts them into a usable index, omitting
any that are given for variables that the ParamArray does not depend on
and raises ValueErrors if None is provided when required.</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._paramarray.ParamArray.add_gaussian_fit_param">
<code class="sig-name descname"><span class="pre">add_gaussian_fit_param</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray.add_gaussian_fit_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a gaussian sampled fitting parameter</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._paramarray.ParamArray.add_uniform_fit_param">
<code class="sig-name descname"><span class="pre">add_uniform_fit_param</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">low_lim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_lim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_allowed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray.add_uniform_fit_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a parameter to be fitted with uniform sampling</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._paramarray.ParamArray.from_unit_interval">
<code class="sig-name descname"><span class="pre">from_unit_interval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray.from_unit_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a value u in the range [0,1] to a physical value. Used in the
dynesty routine</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._paramarray.ParamArray.generate_blank_ParamArray">
<code class="sig-name descname"><span class="pre">generate_blank_ParamArray</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray.generate_blank_ParamArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces a ParamArray with the same telescope, filter, and epoch
dependencies and shape, but with everything else initialised to None</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._paramarray.ParamArray.get_flat_array">
<code class="sig-name descname"><span class="pre">get_flat_array</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray.get_flat_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the array as a flat list. Useful for getting average values</p>
</dd></dl>

<dl class="py method">
<dt id="transitfit._paramarray.ParamArray.get_value">
<code class="sig-name descname"><span class="pre">get_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray.get_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transitfit._paramarray.ParamArray.set_value">
<code class="sig-name descname"><span class="pre">set_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._paramarray.ParamArray.set_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the array entry at the provided value</p>
<p>Value can be any object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-transitfit._utils">
<span id="general-utility-functions"></span><h2>General utility functions<a class="headerlink" href="#module-transitfit._utils" title="Permalink to this headline">¶</a></h2>
<p>This is a series of utility functions for TransitFit, including input validation</p>
<dl class="py function">
<dt id="transitfit._utils.AU_to_host_radii">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">AU_to_host_radii</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.AU_to_host_radii" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a number in AU to a value in host radii when given the host
radius R in Solar radii. Inverse of host_radii_to_AU.</p>
</dd></dl>

<dl class="py function">
<dt id="transitfit._utils.calculate_logg">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">calculate_logg</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_mass</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_radius</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.calculate_logg" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates log10(g) for a host in units usable by TransitFit.
g is in cm s^-2</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host_mass</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The host mass in solar masses and the uncertainty</p></li>
<li><p><strong>host_radius</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) – The host radius in solar radii and the uncertainty</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit._utils.estimate_t14">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">estimate_t14</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Rp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Rs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.estimate_t14" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates t14 in minutes, if P is in days</p>
</dd></dl>

<dl class="py function">
<dt id="transitfit._utils.get_covariance_matrix">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">get_covariance_matrix</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.get_covariance_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a covariance matrix from Dynesty results</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> (<em>dynesty.results.Results</em>) – The Dynesty results object, but must also have weights as an entry</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cov</strong> – The covariance matrix for the results object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array, shape (ndims, ndims)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit._utils.get_normalised_weights">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">get_normalised_weights</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.get_normalised_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtains normalised weights for the Dynesty results</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> (<em>dynesty.results.Results</em>) – The Dynesty results object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>weights</strong> – The normalised weights for each sample set</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array, shape (n_iterations,)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit._utils.host_radii_to_AU">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">host_radii_to_AU</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.host_radii_to_AU" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a separation in host radii into a separation in AU when given
the host radius R in Solar radii. Inverse of AU_to_host_radii.</p>
</dd></dl>

<dl class="py function">
<dt id="transitfit._utils.split_lightcurve_file">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">split_lightcurve_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t14</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_base_fname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'split_curve'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.split_lightcurve_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a light curve file into multiple single epoch files</p>
<p>Splits a multi-epoch lightcurve data file into multiple single-epoch files
and saves these. This is useful for dealing with multi-epoch observations
which contain TTVs, or have long term periodic trends, since single-epoch
observation trends can be approximated with polynomial fits. New files
are created of the form new_base_name_X</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The path to the light curve data to be split</p></li>
<li><p><strong>t0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – The centre of a transit</p></li>
<li><p><strong>P</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – The estimated period of the planet in days</p></li>
<li><p><strong>t14</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The approximate transit duration in minutes. Default is 20</p></li>
<li><p><strong>cutoff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – If there are no data within t14 * cutoff of t0, a period will be
discarded. Default is 0.25</p></li>
<li><p><strong>window</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Data outside of the range [t0 ± (0.5 * t14) * window] will be
discarded. Default is 5.</p></li>
<li><p><strong>new_base_fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The base name for the new files, which will have numbers appended
depending on the epoch. This can be used to specify a relative path
for saving. Default is <cite>‘split_curve’</cite>.</p></li>
<li><p><strong>return_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>paths</strong> – The paths to each of the new data files</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array_like, shape (n_curves,)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transitfit._utils.validate_variable_key">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">validate_variable_key</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.validate_variable_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that a key is valid for use with PriorInfo, and corrects when it
is obvious what is meant. Raises KeyError if unable to correct.</p>
</dd></dl>

<dl class="py function">
<dt id="transitfit._utils.weighted_avg_and_std">
<code class="sig-prename descclassname"><span class="pre">transitfit._utils.</span></code><code class="sig-name descname"><span class="pre">weighted_avg_and_std</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit._utils.weighted_avg_and_std" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the weighted average and error on some data.</p>
<p>axis defaults to the last one (-1)</p>
</dd></dl>

<span class="target" id="module-transitfit.time_conversions"></span><p>time_conversions</p>
<p>Module which uses astropy.time to convert between different time standards.</p>
<dl class="py function">
<dt id="transitfit.time_conversions.MJD_to_BJD">
<code class="sig-prename descclassname"><span class="pre">transitfit.time_conversions.</span></code><code class="sig-name descname"><span class="pre">MJD_to_BJD</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mjd_times</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elevation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ra_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hourangle'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transitfit.time_conversions.MJD_to_BJD" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an array of times in MJD and converts to BJD, using observation and
telescope data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mjd_times</strong> (<em>array_like</em><em>, </em><em>shape</em><em> (</em><em>N</em><em>, </em><em>)</em>) – The times to be converted from MJD</p></li>
<li><p><strong>ra</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>length 3</em>) – The right ascension of the observation in either (d, m, s) or (h, m, s)
depending on if unit is ‘deg’ or ‘hourangle’</p></li>
<li><p><strong>dec</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>length 3</em>) – The declination of the observation in (d, m, s)</p></li>
<li><p><strong>lat</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The latitude of the observer in degrees or “dd:mm:ss”</p></li>
<li><p><strong>log</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The longitude of the observer in degrees or “dd:mm:ss”</p></li>
<li><p><strong>elevation</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – The elevation of the observer in meters</p></li>
<li><p><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – The unit being used for ra. Either <cite>‘deg’</cite> for degrees or <cite>‘hourangle’</cite>
for hour angle. Default is <cite>‘hourangle’</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>bjd_times</strong> – The times in Barycentric Julian Date</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array_like, shape (N, )</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="faqs.html" class="btn btn-neutral float-left" title="FAQs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Joshua Hayes and collaborators.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>